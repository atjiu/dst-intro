<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È••Ëçí‰ΩúÁâ©ÁßçÊ§çÂä©Êâã</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="./assets/js/react.development.js"></script>
    <script crossorigin src="./assets/js/react-dom.development.js"></script>
    <script src="./assets/js/babel.min.js"></script>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-container: #ffffff;
            --text-primary: #333333;
            --text-secondary: #666666;
            --border-color: #dee2e6;
            --accent-color: #4a90e2;
            --accent-hover: #357abd;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --red-cell: #ff6b6b;
            --green-cell: #51cf66;
            --blue-cell: #339af0;
            --shadow: rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --bg-container: #252525;
            --text-primary: #f8f9fa;
            --text-secondary: #adb5bd;
            --border-color: #495057;
            --accent-color: #64b5f6;
            --accent-hover: #90caf9;
            --success-color: #4caf50;
            --warning-color: #ffb74d;
            --danger-color: #f44336;
            --red-cell: #e53935;
            --green-cell: #43a047;
            --blue-cell: #1e88e5;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
            min-height: 100vh;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--accent-color);
        }

        .header h1 {
            color: var(--accent-color);
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        @media (min-width: 992px) {
            .main-content {
                grid-template-columns: 2fr 1fr;
            }
        }

        .card {
            background: var(--bg-container);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .card:hover {
            box-shadow: 0 6px 20px var(--shadow);
        }

        .card-title {
            font-size: 1.5rem;
            color: var(--accent-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ÊäòÂè†Èù¢ÊùøÊ†∑Âºè */
        .accordion {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .accordion-header {
            padding: 16px 20px;
            background: var(--bg-secondary);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .accordion-header:hover {
            background: var(--accent-color);
            color: white;
        }

        .accordion-header.active {
            background: var(--accent-color);
            color: white;
        }

        .accordion-content {
            padding: 20px;
            background: var(--bg-container);
            border-top: 1px solid var(--border-color);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Ë°®Ê†ºÊ†∑Âºè */
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.95rem;
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        .data-table th {
            background: var(--accent-color);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .data-table tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        .data-table tr:hover {
            background: rgba(74, 144, 226, 0.1);
        }

        /* CanvasÊØî‰æãÁΩëÊ†ºÊ†∑Âºè */
        .ratio-grid-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 15px 0;
        }

        .ratio-item {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 20px;
        }

        .ratio-item h4 {
            color: var(--accent-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
            text-align: center;
        }

        .canvas-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
        }

        .ratio-canvas {
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--bg-container);
        }

        /* ÊéßÂà∂Èù¢ÊùøÊ†∑Âºè */
        .control-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Â≠£ËäÇÈÄâÊã©Âô®Ê†∑Âºè */
        .season-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }

        .season-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-container);
            transition: var(--transition);
        }

        .season-option:hover {
            border-color: var(--accent-color);
            background: rgba(74, 144, 226, 0.05);
        }

        .season-option.selected {
            border-color: var(--accent-color);
            background: rgba(74, 144, 226, 0.1);
        }

        .season-option input[type="radio"] {
            display: none;
        }

        .season-label {
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .season-option.selected .season-label {
            color: var(--accent-color);
            font-weight: 600;
        }

        .season-icon {
            font-size: 1.2rem;
        }

        /* Â§çÈÄâÊ°ÜÁªÑÊ†∑Âºè */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .checkbox-group {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            background: var(--bg-container);
            transition: var(--transition);
        }

        .checkbox-item:hover {
            border-color: var(--accent-color);
            background: rgba(74, 144, 226, 0.05);
        }

        .checkbox-item.checked {
            border-color: var(--accent-color);
            background: rgba(74, 144, 226, 0.1);
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
            flex: 1;
            cursor: pointer;
            user-select: none;
        }

        .checkbox-item.checked .checkbox-label {
            color: var(--accent-color);
            font-weight: 600;
        }

        /* Ê®°ÁªÑÊ†áÁ≠æÊ†∑Âºè */
        .mod-tag {
            display: inline-block;
            padding: 2px 8px;
            background: var(--success-color);
            color: white;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 8px;
            font-weight: normal;
        }

        .mod-tag-original {
            background: var(--accent-color);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        .btn-block {
            width: 100%;
        }

        /* ‰ΩúÁâ©ÈÄâÊã©ÁΩëÊ†º */
        .crop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .crop-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .crop-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .crop-item {
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-container);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .crop-item:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .crop-item.selected {
            border-color: var(--accent-color);
            background: rgba(74, 144, 226, 0.1);
        }

        .crop-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .crop-name {
            font-weight: 500;
            color: var(--text-primary);
            flex: 1;
        }

        /* ÁªìÊûúÂ±ïÁ§∫ */
        .results-container {
            margin-top: 20px;
        }

        .result-item {
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
        }

        .result-title {
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .result-ratios {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .ratio-badge {
            padding: 6px 12px;
            background: var(--bg-container);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--bg-container);
            border: 2px solid var(--border-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px var(--shadow);
            z-index: 1000;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            transform: rotate(30deg);
        }

        .theme-toggle svg {
            width: 24px;
            height: 24px;
            fill: var(--text-primary);
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .app-container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .card {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .app-container {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.75rem;
            }

            .card {
                padding: 15px;
            }
        }

        /* Âä†ËΩΩÂä®Áîª */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ÊèêÁ§∫‰ø°ÊÅØ */
        .info-text {
            padding: 15px;
            background: rgba(74, 144, 226, 0.1);
            border-left: 4px solid var(--accent-color);
            border-radius: 4px;
            margin: 15px 0;
            color: var(--text-secondary);
        }

        .info-text p {
            margin-bottom: 8px;
        }

        .info-text p:last-child {
            margin-bottom: 0;
        }

        .warning-text {
            padding: 15px;
            background: rgba(255, 193, 7, 0.1);
            border-left: 4px solid var(--warning-color);
            border-radius: 4px;
            margin: 15px 0;
            color: var(--text-secondary);
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            font-style: italic;
            grid-column: 1 / -1;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            font-style: italic;
            background: var(--bg-secondary);
            border-radius: 8px;
            margin: 20px 0;
        }

        .no-results-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .emoji {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // SVGÂõæÊ†áÁªÑ‰ª∂
        const SunIcon = () => (
            <svg viewBox="0 0 24 24">
                <path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 S11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0 s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0-0.39-0.39-1.03-1.41-1.03 c-0.39,0-1.03,0.39-1.03,1.41l0,1.06c0,0.39,0.39,1.03,1.03,1.03c0.39,0,1.03-0.39,1.03-1.03L19.42,5.99z M7.05,18.36 c0-0.39-0.39-1.03-1.03-1.03c-0.39,0-1.03,0.39-1.03,1.41l0,1.06c0,0.39,0.39,1.03,1.03,1.03c0.39,0,1.03-0.39,1.03-1.03 L7.05,18.36z"/>
            </svg>
        );

        const MoonIcon = () => (
            <svg viewBox="0 0 24 24">
                <path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/>
            </svg>
        );

        // ÊäòÂè†Èù¢ÊùøÁªÑ‰ª∂
        const Accordion = ({ title, children, defaultOpen = false }) => {
            const [isOpen, setIsOpen] = useState(defaultOpen);

            return (
                <div className="accordion">
                    <div
                        className={`accordion-header ${isOpen ? 'active' : ''}`}
                        onClick={() => setIsOpen(!isOpen)}
                    >
                        <span>{title}</span>
                        <span>{isOpen ? '‚àí' : '+'}</span>
                    </div>
                    {isOpen && <div className="accordion-content">{children}</div>}
                </div>
            );
        };

        // CanvasÊØî‰æãÁΩëÊ†ºÁªÑ‰ª∂
        const RatioCanvas = ({ ratioName, theme }) => {
            const canvasRef = useRef(null);
            const [colors] = useState({
                red: '#ff6b6b',
                green: '#51cf66',
                blue: '#339af0',
                empty: '#ffffff'
            });

            const getGridConfig = (name) => {
                switch(name) {
                    case '1:1':
                        return {
                            rows: 3,
                            cols: 3,
                            grid: [
                                ['red', 'red', 'red'],
                                ['red', 'empty', 'green'],
                                ['green', 'green', 'green']
                            ]
                        };
                    case '1:2':
                        return {
                            rows: 3,
                            cols: 3,
                            grid: [
                                ['red', 'red', 'red'],
                                ['green', 'green', 'green'],
                                ['red', 'red', 'red']
                            ]
                        };
                    case '1:3':
                        return {
                            rows: 3,
                            cols: 6,
                            grid: [
                                ['empty', 'red', 'red', 'red', 'red', 'empty'],
                                ['red', 'red', 'green', 'green', 'red', 'red'],
                                ['red', 'red', 'green', 'green', 'red', 'red']
                            ]
                        };
                    case '1:1:1':
                        return {
                            rows: 3,
                            cols: 3,
                            grid: [
                                ['red', 'red', 'red'],
                                ['green', 'green', 'green'],
                                ['blue', 'blue', 'blue']
                            ]
                        };
                    case '1:1:2':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['red', 'red', 'red', 'red', 'red', 'red'],
                                ['red', 'blue', 'green', 'blue', 'green', 'red'],
                                ['empty', 'blue', 'green', 'blue', 'green', 'empty'],
                                ['empty', 'blue', 'green', 'blue', 'green', 'empty'],
                                ['red', 'blue', 'green', 'blue', 'green', 'red'],
                                ['red', 'red', 'red', 'red', 'red', 'red']
                            ]
                        };
                    case '1:1:3':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['empty', 'green', 'green', 'green', 'green', 'empty'],
                                ['empty', 'green', 'red', 'red', 'green', 'empty'],
                                ['empty', 'empty', 'blue', 'blue', 'empty', 'empty'],
                                ['empty', 'empty', 'red', 'red', 'empty', 'empty'],
                                ['empty', 'green', 'blue', 'blue', 'green', 'empty'],
                                ['empty', 'green', 'green', 'green', 'green', 'empty']
                            ]
                        };
                    case '1:1:4':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['empty', 'green', 'green', 'green', 'green', 'empty'],
                                ['empty', 'green', 'red', 'red', 'green', 'empty'],
                                ['empty', 'green', 'blue', 'blue', 'green', 'empty'],
                                ['empty', 'green', 'red', 'red', 'green', 'empty'],
                                ['empty', 'green', 'blue', 'blue', 'green', 'empty'],
                                ['empty', 'green', 'green', 'green', 'green', 'empty']
                            ]
                        };
                    case '1:2:2':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                                ['empty', 'green', 'red', 'red', 'green', 'empty'],
                                ['green', 'red', 'blue', 'blue', 'red', 'green'],
                                ['green', 'red', 'blue', 'blue', 'red', 'green'],
                                ['empty', 'green', 'red', 'red', 'green', 'empty'],
                                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty']
                            ]
                        };
                    case '1:2:3':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['empty', 'blue', 'blue', 'blue', 'blue', 'empty'],
                                ['empty', 'blue', 'green', 'green', 'blue', 'empty'],
                                ['empty', 'green', 'red', 'red', 'green', 'empty'],
                                ['empty', 'green', 'red', 'red', 'green', 'empty'],
                                ['empty', 'blue', 'green', 'green', 'blue', 'empty'],
                                ['empty', 'blue', 'blue', 'blue', 'blue', 'empty']
                            ]
                        };
                    case '1:2:4':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['red', 'red', 'empty', 'empty', 'red', 'red'],
                                ['red', 'red', 'blue', 'blue', 'red', 'red'],
                                ['empty', 'blue', 'green', 'green', 'blue', 'empty'],
                                ['empty', 'blue', 'green', 'green', 'blue', 'empty'],
                                ['red', 'red', 'blue', 'blue', 'red', 'red'],
                                ['red', 'red', 'empty', 'empty', 'red', 'red']
                            ]
                        };
                    case '1:2:5':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['red', 'red', 'red', 'red', 'red', 'red'],
                                ['red', 'red', 'blue', 'blue', 'red', 'red'],
                                ['empty', 'blue', 'green', 'green', 'blue', 'empty'],
                                ['empty', 'blue', 'green', 'green', 'blue', 'empty'],
                                ['red', 'red', 'blue', 'blue', 'red', 'red'],
                                ['red', 'red', 'red', 'red', 'red', 'red']
                            ]
                        };
                    case '1:2:6':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['green', 'green', 'green', 'green', 'green', 'green'],
                                ['green', 'green', 'red', 'red', 'green', 'green'],
                                ['green', 'red', 'blue', 'blue', 'red', 'green'],
                                ['green', 'red', 'blue', 'blue', 'red', 'green'],
                                ['green', 'green', 'red', 'red', 'green', 'green'],
                                ['green', 'green', 'green', 'green', 'green', 'green']
                            ]
                        };
                    case '1:3:4':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['blue', 'blue', 'blue', 'blue', 'blue', 'blue'],
                                ['blue', 'red', 'red', 'red', 'red', 'blue'],
                                ['empty', 'red', 'green', 'green', 'red', 'empty'],
                                ['empty', 'red', 'green', 'green', 'red', 'empty'],
                                ['blue', 'red', 'red', 'red', 'red', 'blue'],
                                ['blue', 'blue', 'blue', 'blue', 'blue', 'blue']
                            ]
                        };
                    case '1:3:5':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['blue', 'blue', 'blue', 'blue', 'blue', 'blue'],
                                ['blue', 'red', 'red', 'red', 'red', 'blue'],
                                ['blue', 'red', 'green', 'green', 'red', 'blue'],
                                ['blue', 'red', 'green', 'green', 'red', 'blue'],
                                ['blue', 'red', 'red', 'red', 'red', 'blue'],
                                ['blue', 'blue', 'blue', 'blue', 'blue', 'blue']
                            ]
                        };
                    case '2:3:4':
                        return {
                            rows: 6,
                            cols: 6,
                            grid: [
                                ['red', 'blue', 'blue', 'blue', 'blue', 'red'],
                                ['red', 'blue', 'green', 'green', 'blue', 'red'],
                                ['red', 'red', 'green', 'green', 'red', 'red'],
                                ['red', 'red', 'green', 'green', 'red', 'red'],
                                ['red', 'blue', 'green', 'green', 'blue', 'red'],
                                ['red', 'blue', 'blue', 'blue', 'blue', 'red']
                            ]
                        };
                    default:
                        return { rows: 0, cols: 0, grid: [] };
                }
            };

            useEffect(() => {
                const canvas = canvasRef.current;
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                const config = getGridConfig(ratioName);

                if (config.rows === 0 || config.cols === 0) return;

                // ËÆ°ÁÆóÊØè‰∏™Ê†ºÂ≠êÁöÑÂ§ßÂ∞è
                const cellSize = 40;
                const padding = 2;
                const canvasWidth = config.cols * cellSize;
                const canvasHeight = config.rows * cellSize;

                // ËÆæÁΩÆcanvasÂ∞∫ÂØ∏
                canvas.width = canvasWidth;
                canvas.height = canvasHeight;
                canvas.style.width = `${canvasWidth}px`;
                canvas.style.height = `${canvasHeight}px`;

                // Ê∏ÖÈô§ÁîªÂ∏É
                ctx.clearRect(0, 0, canvasWidth, canvasHeight);

                // ÁªòÂà∂ÁΩëÊ†ºËÉåÊôØ
                ctx.fillStyle = theme === 'dark' ? '#252525' : '#ffffff';
                ctx.fillRect(0, 0, canvasWidth, canvasHeight);

                // ÁªòÂà∂ÁΩëÊ†º
                for (let row = 0; row < config.rows; row++) {
                    for (let col = 0; col < config.cols; col++) {
                        const cellType = config.grid[row][col];
                        const color = colors[cellType] || colors.empty;

                        // ÁªòÂà∂Ê†ºÂ≠ê
                        ctx.fillStyle = color;
                        ctx.fillRect(
                            col * cellSize + padding,
                            row * cellSize + padding,
                            cellSize - padding * 2,
                            cellSize - padding * 2
                        );

                        // ÁªòÂà∂ËæπÊ°Ü
                        ctx.strokeStyle = theme === 'dark' ? '#495057' : '#dee2e6';
                        ctx.lineWidth = 1;
                        ctx.strokeRect(
                            col * cellSize + padding,
                            row * cellSize + padding,
                            cellSize - padding * 2,
                            cellSize - padding * 2
                        );
                    }
                }
            }, [ratioName, theme, colors]);

            return (
                <div className="canvas-container">
                    <canvas
                        ref={canvasRef}
                        className="ratio-canvas"
                        title={`ÁßçÊ§çÊØî‰æãÂ∏ÉÂ±Ä: ${ratioName}`}
                    />
                </div>
            );
        };

        // Â≠£ËäÇÈÄâÊã©Âô®ÁªÑ‰ª∂
        const SeasonSelector = ({ selectedSeason, onSeasonChange }) => {
            const seasons = [
                { id: '', label: 'ÊâÄÊúâÂ≠£ËäÇ', emoji: 'üåç' },
                { id: 'spring', label: 'Êò•Â≠£', emoji: 'üå∏' },
                { id: 'summer', label: 'Â§èÂ≠£', emoji: '‚òÄÔ∏è' },
                { id: 'autumn', label: 'ÁßãÂ≠£', emoji: 'üçÇ' },
                { id: 'winter', label: 'ÂÜ¨Â≠£', emoji: '‚ùÑÔ∏è' }
            ];

            return (
                <div className="season-selector">
                    {seasons.map(season => (
                        <label
                            key={season.id}
                            className={`season-option ${selectedSeason === season.id ? 'selected' : ''}`}
                            onClick={() => onSeasonChange(season.id)}
                        >
                            <input
                                type="radio"
                                name="season"
                                value={season.id}
                                checked={selectedSeason === season.id}
                                onChange={() => {}}
                            />
                            <span className="season-label">
                                <span className="emoji">{season.emoji}</span>
                                <span>{season.label}</span>
                            </span>
                        </label>
                    ))}
                </div>
            );
        };

        // ‰∏ªÂ∫îÁî®ÁªÑ‰ª∂
        const App = () => {
            // ‰∏ªÈ¢òÁä∂ÊÄÅ
            const [theme, setTheme] = useState('light');

            // ÂéüÂßãÊï∞ÊçÆ
            const originData = [
                { name: "Ëä¶Á¨ã", image: "./assets/images/farm_plants/asparagus.png", season: ["spring", "winter"], water: 1, fertilizer1: 1, fertilizer2: -2, fertilizer3: 1 },
                { name: "ËÉ°ËêùÂçú", image: "./assets/images/farm_plants/carrot.png", season: ["spring", "winter", "autumn"], water: 1, fertilizer1: -2, fertilizer2: 1, fertilizer3: 1 },
                { name: "ÁéâÁ±≥", image: "./assets/images/farm_plants/corn.png", season: ["spring", "summer", "autumn"], water: 1, fertilizer1: 1, fertilizer2: -2, fertilizer3: 1 },
                { name: "ÁÅ´ÈæôÊûú", image: "./assets/images/farm_plants/dragonfruit.png", season: ["spring", "summer"], water: 2, fertilizer1: 2, fertilizer2: 2, fertilizer3: -4 },
                { name: "Ê¶¥Ëé≤", image: "./assets/images/farm_plants/durian.png", season: ["spring"], water: 1, fertilizer1: 2, fertilizer2: -4, fertilizer3: 2 },
                { name: "ËåÑÂ≠ê", image: "./assets/images/farm_plants/eggplant.png", season: ["spring", "autumn"], water: 2, fertilizer1: 1, fertilizer2: 1, fertilizer3: -2 },
                { name: "Â§ßËíú", image: "./assets/images/farm_plants/garlic.png", season: ["spring", "winter", "summer", "autumn"], water: 1, fertilizer1: 2, fertilizer2: -4, fertilizer3: 2 },
                { name: "Ê¥ãËë±", image: "./assets/images/farm_plants/onion.png", season: ["spring", "summer", "autumn"], water: 2, fertilizer1: -4, fertilizer2: 2, fertilizer3: 2 },
                { name: "Ëæ£Ê§í", image: "./assets/images/farm_plants/pepper.png", season: ["summer", "autumn"], water: 1, fertilizer1: 2, fertilizer2: 2, fertilizer3: -4 },
                { name: "Áü≥Ê¶¥", image: "./assets/images/farm_plants/pomegranate.png", season: ["spring", "summer"], water: 2, fertilizer1: -4, fertilizer2: 2, fertilizer3: 2 },
                { name: "ÂúüË±Ü", image: "./assets/images/farm_plants/potato.png", season: ["spring", "winter", "autumn"], water: 1, fertilizer1: 1, fertilizer2: 1, fertilizer3: -2 },
                { name: "ÂçóÁìú", image: "./assets/images/farm_plants/pumpkin.png", season: ["autumn", "winter"], water: 2, fertilizer1: -2, fertilizer2: 1, fertilizer3: 1 },
                { name: "Áï™ËåÑ", image: "./assets/images/farm_plants/tomato.png", season: ["spring", "summer", "autumn"], water: 3, fertilizer1: -1, fertilizer2: -1, fertilizer3: 2 },
                { name: "Ë•øÁìú", image: "./assets/images/farm_plants/watermelon.png", season: ["spring", "summer"], water: 3, fertilizer1: 2, fertilizer2: -1, fertilizer3: -1 },
            ];

            // Ê®°ÁªÑÊï∞ÊçÆ
            const modData = {
                ndnr: [{ name: "Â§ßË±Ü", image: "./assets/images/farm_plants/ndnr_soybean.png", season: ["summer", "autumn"], water: 1, fertilizer1: 4, fertilizer2: -2, fertilizer3: -2 }],
                odoy: [{ name: "Ëä±Áîü", image: "./assets/images/farm_plants/odoy_peanut.png", season: ["autumn", "winter"], water: 1, fertilizer1: 2, fertilizer2: -1, fertilizer3: -1 }],
                lj: [{ name: "ÊùæËêù", image: "./assets/images/farm_plants/pineananas.png", season: ["summer", "autumn"], water: 1, fertilizer1: -1, fertilizer2: 2, fertilizer3: -1 }],
                sh: [{ name: "Ëë´Ëä¶", image: "./assets/images/farm_plants/gourd.png", season: ["autumn"], water: 2, fertilizer1: 1, fertilizer2: 1, fertilizer3: -2 }],
                wl: [
                    // { name: "Ëë´Ëä¶Ëó§", image: "./assets/images/farm_plants/odoy_peanut.png", season: ["autumn"], water: 2, fertilizer1: 1, fertilizer2: 1, fertilizer3: -2 },
                    { name: "ËãπÊûú", image: "./assets/images/farm_plants/gzresource_apple.png", season: ["autumn"], water: 2, fertilizer1: 5, fertilizer2: -4, fertilizer3: -1 },
                    { name: "Êü†Ê™¨", image: "./assets/images/farm_plants/gzresource_lemon.png", season: ["autumn", "spring"], water: 2, fertilizer1: -6, fertilizer2: -3, fertilizer3: 9 },
                    { name: "ËäíÊûú", image: "./assets/images/farm_plants/gzresource_mango.png", season: ["winter", "summer"], water: 3, fertilizer1: 6, fertilizer2: -12, fertilizer3: 6 },
                    { name: "ÈùíÊ©ô", image: "./assets/images/farm_plants/gzresource_orange.png", season: ["summer"], water: 3, fertilizer1: 13, fertilizer2: -8, fertilizer3: -5 },
                    { name: "ËçâËéì", image: "./assets/images/farm_plants/gzresource_strawberry.png", season: ["winter", "spring"], water: 3, fertilizer1: -2, fertilizer2: -11, fertilizer3: 13 },
                    { name: "ÁîúËèú", image: "./assets/images/farm_plants/gzresource_sugarbeet.png", season: ["spring", "winter", "summer", "autumn"], water: 1, fertilizer1: -1, fertilizer2: 2, fertilizer3: -1 },
                    { name: "ÂÜ¨Áìú", image: "./assets/images/farm_plants/gzresource_whitegourd.png", season: ["spring", "autumn"], water: 3, fertilizer1: -2, fertilizer2: -8, fertilizer3: 10 },
                ],
                fy: [
                    { name: "Ê§∞Â≠ê", image: "./assets/images/farm_plants/honor_coconut.png", season: ["spring", "autumn", "winter"], water: 1, fertilizer1: 1, fertilizer2: 1, fertilizer3: -2 },
                    { name: "Ëå∂", image: "./assets/images/farm_plants/honor_tea.png", season: ["spring", "autumn"], water: 1, fertilizer1: 2, fertilizer2: -4, fertilizer3: 2 },
                    { name: "Ê∞¥Á®ª", image: "./assets/images/farm_plants/honor_rice.png", season: ["spring", "summer"], water: 1, fertilizer1: 1, fertilizer2: -2, fertilizer3: 1 },
                    { name: "Â∞èÈ∫¶", image: "./assets/images/farm_plants/honor_wheat.png", season: ["spring", "summer", "autumn"], water: 1, fertilizer1: -1, fertilizer2: 2, fertilizer3: -1 },
                    { name: "ÈáëÁÅØÊûú", image: "./assets/images/farm_plants/honor_goldenlanternfruit.png", season: ["spring", "summer", "autumn"], water: 1, fertilizer1: -1, fertilizer2: -1, fertilizer3: 2 },
                    { name: "Ëä¶Ëçü", image: "./assets/images/farm_plants/honor_aloe.png", season: ["autumn", "winter"], water: 1, fertilizer1: -4, fertilizer2: 2, fertilizer3: 2 },
                    { name: "ÂìàÂØÜÁìú", image: "./assets/images/farm_plants/honor_hamimelon.png", season: ["summer", "autumn"], water: 1, fertilizer1: 2, fertilizer2: 2, fertilizer3: -4 },
                    { name: "Ê†∏Ê°É", image: "./assets/images/farm_plants/honor_nut.png", season: ["spring", "autumn", "winter"], water: 1, fertilizer1: -1, fertilizer2: -1, fertilizer3: 2 },
                    { name: "ËõáÁöÆÊûú", image: "./assets/images/farm_plants/terror_snakeskinfruit.png", season: ["summer", "autumn", "winter"], water: 1, fertilizer1: 2, fertilizer2: -1, fertilizer3: -1 },
                    { name: "ËìùËéì", image: "./assets/images/farm_plants/terror_blueberry.png", season: ["summer", "autumn", "winter"], water: 1, fertilizer1: 2, fertilizer2: -4, fertilizer3: 2 },
                    { name: "Ê¥ãÂßú", image: "./assets/images/farm_plants/terror_ginger.png", season: ["autumn", "winter"], water: 1, fertilizer1: -4, fertilizer2: 2, fertilizer3: 2 },
                    { name: "Êü†Ê™¨", image: "./assets/images/farm_plants/terror_lemon.png", season: ["spring", "summer", "autumn"], water: 1, fertilizer1: 2, fertilizer2: -4, fertilizer3: 2 },
                    { name: "ËçîÊûù", image: "./assets/images/farm_plants/terror_litchi.png", season: ["spring", "summer", "autumn"], water: 1, fertilizer1: -4, fertilizer2: 8, fertilizer3: -4 },
                    { name: "ÂíñÂï°", image: "./assets/images/farm_plants/terror_coffee.png", season: ["spring", "autumn", "winter"], water: 1, fertilizer1: -4, fertilizer2: 2, fertilizer3: 2 },
                    { name: "Â±±Ê•Ç", image: "./assets/images/farm_plants/terror_hawthorn.png", season: ["autumn", "winter"], water: 1, fertilizer1: 8, fertilizer2: -4, fertilizer3: -4 },
                    { name: "ÁôæÈ¶ôÊûú", image: "./assets/images/farm_plants/terror_passionfruit.png", season: ["spring", "winter"], water: 1, fertilizer1: -4, fertilizer2: -4, fertilizer3: 8 },
                ]
            };

            // Ê®°ÁªÑÈÖçÁΩÆ
            const modConfig = [
                { id: 'original', name: 'ÂéüÁâà', default: true },
                { id: 'ndnr', name: 'ÂØåË¥µÈô©‰∏≠Ê±Ç' },
                { id: 'odoy', name: 'Â∫¶Êó•Â¶ÇÂπ¥' },
                { id: 'lj', name: 'Ê£±Èïú' },
                { id: 'sh', name: 'Á•ûËØù‰π¶ËØ¥' },
                { id: 'wl', name: 'ËàûÊûóÂ§ß‰ºö' },
                { id: 'fy', name: '‰∏∞ËÄòÁßòÂ¢É' }
            ];

            // Áä∂ÊÄÅÁÆ°ÁêÜ
            const [activeMods, setActiveMods] = useState(['original']);
            const [data, setData] = useState([...originData]);
            const [selectedSeason, setSelectedSeason] = useState('');
            const [selectedCrops, setSelectedCrops] = useState([]);
            const [results, setResults] = useState({});

            // ÁßçÂ≠êÁúüÂêçÂØπÁÖßË°®
            const seedNames = [
                { original: "ÊñπÂΩ¢ÁßçÂ≠ê", real: "Ë•øÁìúÁßçÂ≠ê" },
                { original: "ÂùóÁä∂ÁßçÂ≠ê", real: "Ëæ£Ê§íÁßçÂ≠ê" },
                { original: "Ê§≠ÂúÜÂΩ¢ÁßçÂ≠ê", real: "ËÉ°ËêùÂçúÁßçÂ≠ê" },
                { original: "Â∞ñÁßçÂ≠ê", real: "ÂçóÁìúÁßçÂ≠ê" },
                { original: "ÁêÉËåéÁä∂ÁßçÂ≠ê", real: "ÁÅ´ÈæôÊûúÁßçÂ≠ê" },
                { original: "Êº©Ê∂°ÁßçÂ≠ê", real: "ËåÑÂ≠êÁßçÂ≠ê" },
                { original: "Â∏¶Âà∫ÁöÑÁßçÂ≠ê", real: "Áï™ËåÑÁßçÂ≠ê" },
                { original: "È£éÂàÆÊù•ÁßçÂ≠ê", real: "Áü≥Ê¶¥ÁßçÂ≠ê" },
                { original: "Á≠íÁä∂ÁßçÂ≠ê", real: "Ëä¶Á¨ãÁßçÂ≠ê" },
                { original: "ÊØõËå∏Ëå∏ÁöÑÁßçÂ≠ê", real: "ÂúüË±ÜÁßçÂ≠ê" },
                { original: "ÁßçÂ≠êËçö", real: "Â§ßËíúÁßçÂ≠ê" },
                { original: "Á∞áÁä∂ÁßçÂ≠ê", real: "ÁéâÁ±≥ÁßçÂ≠ê" },
                { original: "Â∞ñÂΩ¢ÁßçÂ≠ê", real: "Ê¥ãËë±ÁßçÂ≠ê" },
                { original: "ËÑÜÁ±ΩËçö", real: "Ê¶¥Ëé≤ÁßçÂ≠ê" },
            ];

            // Â∏∏ËßÅÊØî‰æãÈÖçÁΩÆ
            const commonRatios = [
                { name: "1:1" },
                { name: "1:2" },
                { name: "1:3" },
                { name: "1:1:1" },
                { name: "1:1:2" },
                { name: "1:1:3" },
                { name: "1:1:4" },
                { name: "1:2:2" },
                { name: "1:2:3" },
                { name: "1:2:4" },
                { name: "1:2:5" },
                { name: "1:2:6" },
                { name: "1:3:4" },
                { name: "1:3:5" },
                { name: "2:3:4" }
            ];

            // ÊåâÂ≠£ËäÇÁ≠õÈÄâÁöÑ‰ΩúÁâ©
            const filteredCrops = useMemo(() => {
                if (!selectedSeason) return data;
                return data.filter(crop => crop.season.includes(selectedSeason));
            }, [data, selectedSeason]);

            // ÂàùÂßãÂåñ‰∏ªÈ¢ò
            useEffect(() => {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const savedTheme = localStorage.getItem('theme');

                if (savedTheme) {
                    setTheme(savedTheme);
                } else if (prefersDark) {
                    setTheme('dark');
                }

                // ÁõëÂê¨Á≥ªÁªü‰∏ªÈ¢òÂèòÂåñ
                const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
                const handleChange = (e) => {
                    if (!localStorage.getItem('theme')) {
                        setTheme(e.matches ? 'dark' : 'light');
                    }
                };

                mediaQuery.addEventListener('change', handleChange);
                return () => mediaQuery.removeEventListener('change', handleChange);
            }, []);

            // Â∫îÁî®‰∏ªÈ¢ò
            useEffect(() => {
                document.body.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            }, [theme]);

            // Êõ¥Êñ∞‰ΩúÁâ©Êï∞ÊçÆ
            useEffect(() => {
                let newData = [];

                // Â¶ÇÊûúÂêØÁî®‰∫ÜÂéüÁâàÔºåÊ∑ªÂä†ÂéüÁâàÊï∞ÊçÆ
                if (activeMods.includes('original')) {
                    newData = [...newData, ...originData];
                }

                // Ê∑ªÂä†ÂÖ∂‰ªñÂêØÁî®ÁöÑÊ®°ÁªÑÊï∞ÊçÆ
                activeMods.forEach(modId => {
                    if (modId !== 'original' && modData[modId]) {
                        newData = [...newData, ...modData[modId]];
                    }
                });

                // ÂéªÈáç
                const uniqueData = newData.filter((crop, index, self) =>
                    index === self.findIndex(c => c.name === crop.name)
                );

                setData(uniqueData);
                // Ê∏ÖÁ©∫ÈÄâÊã©ÁöÑ‰ΩúÁâ©ÔºåÂõ†‰∏∫Êï∞ÊçÆÂèØËÉΩÂ∑≤ÂèòÊõ¥
                setSelectedCrops([]);
            }, [activeMods]);

            // ÂàáÊç¢‰∏ªÈ¢ò
            const toggleTheme = () => {
                setTheme(prev => prev === 'light' ? 'dark' : 'light');
            };

            // ÂàáÊç¢Ê®°ÁªÑ
            const toggleMod = (modId) => {
                setActiveMods(prev => {
                    if (prev.includes(modId)) {
                        // Â¶ÇÊûúË¶ÅÂèñÊ∂àÂéüÁâàÔºåÈúÄË¶ÅÊ£ÄÊü•ÊòØÂê¶ËøòÊúâÂÖ∂‰ªñÊ®°ÁªÑ
                        if (modId === 'original') {
                            // Â¶ÇÊûúÊ≤°ÊúâÂÖ∂‰ªñÊ®°ÁªÑÔºåËá≥Â∞ë‰øùÁïô‰∏Ä‰∏™
                            if (prev.length === 1) {
                                return prev; // ‰∏çËÉΩÂèñÊ∂àÊúÄÂêé‰∏Ä‰∏™Ê®°ÁªÑ
                            }
                            return prev.filter(id => id !== modId);
                        }
                        return prev.filter(id => id !== modId);
                    } else {
                        return [...prev, modId];
                    }
                });
            };

            // ÈÄâÊã©/ÂèñÊ∂àÈÄâÊã©‰ΩúÁâ©
            const toggleCrop = (cropName) => {
                setSelectedCrops(prev =>
                    prev.includes(cropName)
                        ? prev.filter(name => name !== cropName)
                        : [...prev, cropName]
                );
            };

            // ËÆ°ÁÆóÊØî‰æã - ‰øÆÊîπÂêéÁöÑÈÄªËæëÔºåËÄÉËôëÂ≠£ËäÇÂÖºÂÆπÊÄß
            const calculateRatios = () => {
                const plants = filteredCrops;
                const checkedPlants = plants.filter(p => selectedCrops.includes(p.name));

                let ratioArr = [];

                // Ê£ÄÊü•‰ΩúÁâ©ÊòØÂê¶ËÉΩÂú®Âêå‰∏ÄÂ≠£ËäÇÁßçÊ§ç
                const haveCommonSeason = (plant1, plant2, plant3 = null) => {
                    const seasons1 = plant1.season;
                    const seasons2 = plant2.season;

                    // ‰∏§‰ΩúÁâ©ÊØîËæÉ
                    const commonSeasons = seasons1.filter(s => seasons2.includes(s));
                    if (commonSeasons.length === 0) return false;

                    // Â¶ÇÊûúÊòØ‰∏â‰ΩúÁâ©ÊØîËæÉ
                    if (plant3) {
                        const seasons3 = plant3.season;
                        const allCommonSeasons = commonSeasons.filter(s => seasons3.includes(s));
                        return allCommonSeasons.length > 0;
                    }

                    return true;
                };

                // ‰∏§‰ΩúÁâ©ÁªÑÂêà
                for (let i = 0; i < plants.length; i++) {
                    for (let j = i+1; j < plants.length; j++) {
                        // Â¶ÇÊûúÊòØÊâÄÊúâÂ≠£ËäÇÔºåÈúÄË¶ÅÊ£ÄÊü•‰ΩúÁâ©ÊòØÂê¶ÊúâÂÖ±ÂêåÂ≠£ËäÇ
                        if (selectedSeason === '' && !haveCommonSeason(plants[i], plants[j])) {
                            continue;
                        }

                        for (let k = 1; k < 9; k++) {
                            for (let l = 1; l < 9; l++) {
                                if (k * plants[i].fertilizer1 + l * plants[j].fertilizer1 === 0 &&
                                    k * plants[i].fertilizer2 + l * plants[j].fertilizer2 === 0 &&
                                    k * plants[i].fertilizer3 + l * plants[j].fertilizer3 === 0) {
                                    let name = plants[i].name + ":" + plants[j].name
                                    let tmp = ratioArr.filter(item => item.name === name && item.r === (k / l));
                                    if (tmp.length === 0 && (k + l) < 10) {
                                        ratioArr.push({
                                            name: name,
                                            k: k,
                                            l: l,
                                            r: k / l,
                                            rs: k + ":" + l,
                                        });
                                    }
                                }
                            }
                        }
                    }
                }

                // ‰∏â‰ΩúÁâ©ÁªÑÂêà
                for (let i = 0; i < plants.length; i++) {
                    for (let j = i+1; j < plants.length; j++) {
                        for (let j1 = j+1; j1 < plants.length; j1++) {
                            // Â¶ÇÊûúÊòØÊâÄÊúâÂ≠£ËäÇÔºåÈúÄË¶ÅÊ£ÄÊü•‰ΩúÁâ©ÊòØÂê¶ÊúâÂÖ±ÂêåÂ≠£ËäÇ
                            if (selectedSeason === '' && !haveCommonSeason(plants[i], plants[j], plants[j1])) {
                                continue;
                            }

                            for (let k = 1; k < 9; k++) {
                                for (let l = 1; l < 9; l++) {
                                    for (let l1 = 1; l1 < 9; l1++) {
                                        if (k * plants[i].fertilizer1 + l * plants[j].fertilizer1 + l1 * plants[j1].fertilizer1 === 0 &&
                                            k * plants[i].fertilizer2 + l * plants[j].fertilizer2 + l1 * plants[j1].fertilizer2 === 0 &&
                                            k * plants[i].fertilizer3 + l * plants[j].fertilizer3 + l1 * plants[j1].fertilizer3 === 0) {
                                            let name = plants[i].name + ":" + plants[j].name + ":" + plants[j1].name
                                            let tmp = ratioArr.filter(item => item.name === name && item.r === (k / l) && item.r1 === (l / l1));
                                            if (tmp.length === 0 && (k + l + l1) < 10) {
                                                ratioArr.push({
                                                    name: name,
                                                    k: k,
                                                    l: l,
                                                    l1: l1,
                                                    r: k / l,
                                                    r1: l / l1,
                                                    rs: k + ":" + l + ":" + l1,
                                                });
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }

                // Á≠õÈÄâÂåÖÂê´ÈÄâ‰∏≠‰ΩúÁâ©ÁöÑÊØî‰æã
                if (checkedPlants.length > 0) {
                    ratioArr = ratioArr.filter(item => {
                        let tmp = true;
                        for (let i = 0; i < checkedPlants.length; i++) {
                            if (item.name.indexOf(checkedPlants[i].name) === -1) {
                                tmp = false;
                                break;
                            }
                        }
                        return tmp;
                    })
                }

                // ÂàÜÁªÑÁªìÊûú
                const groupedResults = {};
                ratioArr.forEach(item => {
                    if (!groupedResults[item.name]) {
                        groupedResults[item.name] = [];
                    }
                    if (!groupedResults[item.name].includes(item.rs)) {
                        groupedResults[item.name].push(item.rs);
                    }
                });

                setResults(groupedResults);
            };

            return (
                <div className="app-container">
                    {/* ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ */}
                    <button className="theme-toggle" onClick={toggleTheme}>
                        {theme === 'light' ? <MoonIcon /> : <SunIcon />}
                    </button>

                    <header className="header">
                        <h1>üå± È••Ëçí‰ΩúÁâ©ÁßçÊ§çÂä©Êâã</h1>
                        <p>È••ËçíËÅîÊú∫Áâà Farming Simulator - Â∏Æ‰Ω†ËÆ°ÁÆóÂÆåÁæéÁßçÊ§çÊØî‰æã</p>
                    </header>

                    <main className="main-content">
                        {/* Â∑¶‰æß‰∏ªË¶ÅÂÜÖÂÆπ */}
                        <div className="left-column">
                            {/* Ê®°ÁªÑÈÄâÊã© */}
                            <div className="card">
                                <h2 className="card-title">
                                    Ê®°ÁªÑÊâ©Â±ï
                                </h2>
                                <div className="checkbox-group">
                                    {modConfig.map(mod => (
                                        <div
                                            key={mod.id}
                                            className={`checkbox-item ${activeMods.includes(mod.id) ? 'checked' : ''}`}
                                            onClick={() => {
                                                toggleMod(mod.id);
                                                setResults({});
                                            }}
                                        >
                                            <input
                                                type="checkbox"
                                                checked={activeMods.includes(mod.id)}
                                                readOnly
                                            />
                                            <span className="checkbox-label">
                                                {mod.name}
                                                {mod.id !== 'original' && <span className="mod-tag">MOD</span>}
                                                {mod.id === 'original' && <span className="mod-tag mod-tag-original">Âü∫Á°Ä</span>}
                                            </span>
                                        </div>
                                    ))}
                                </div>
                                <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem', marginTop: '10px' }}>
                                    * ÂèØ‰ª•ÂèñÊ∂àÂãæÈÄâÂéüÁâàÔºåÂè™‰ΩøÁî®Ê®°ÁªÑ‰ΩúÁâ©
                                </p>
                            </div>

                            <div className="card">
                                <h2 className="card-title">
                                    Â∑®Â§ß‰ΩúÁâ©ËÆ°ÁÆóÂô®
                                </h2>

                                <div className="control-panel">
                                    <div className="form-group">
                                        <label>ÈÄâÊã©Â≠£ËäÇ</label>
                                        <SeasonSelector
                                            selectedSeason={selectedSeason}
                                            onSeasonChange={(season)=>{
                                                setSelectedSeason(season);
                                                setResults({});
                                            }}
                                        />
                                        {selectedSeason === '' && (
                                            <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem', marginTop: '5px' }}>
                                                * ÈÄâÊã©ÊâÄÊúâÂ≠£ËäÇÊó∂ÔºåÂè™ËÆ°ÁÆóËÉΩÂú®Âêå‰∏ÄÂ≠£ËäÇÁßçÊ§çÁöÑ‰ΩúÁâ©ÁªÑÂêà
                                            </p>
                                        )}
                                    </div>

                                    <div className="form-group">
                                        <label>ÈÄâÊã©‰ΩúÁâ©ÔºàÂèØÂ§öÈÄâÔºåÁî®‰∫éÁ≠õÈÄâÔºâ</label>
                                        <div className="crop-grid">
                                            {filteredCrops.length > 0 ? (
                                                filteredCrops.map((crop, index) => (
                                                    <div
                                                        key={index}
                                                        className={`crop-item ${selectedCrops.includes(crop.name) ? 'selected' : ''}`}
                                                        onClick={() => {
                                                            toggleCrop(crop.name);
                                                            setResults({}); // Ê∏ÖÁ©∫ËÆ°ÁÆóÁªìÊûú
                                                        }}
                                                        title={`${crop.name} - Â≠£ËäÇ: ${crop.season.map(s => s === 'spring' ? 'Êò•' : s === 'summer' ? 'Â§è' : s === 'autumn' ? 'Áßã' : 'ÂÜ¨').join('„ÄÅ')}`}
                                                    >
                                                        <input
                                                            type="checkbox"
                                                            className="crop-checkbox"
                                                            checked={selectedCrops.includes(crop.name)}
                                                            readOnly
                                                        />
                                                        {crop.image && (
                                                            <img
                                                                src={crop.image}
                                                                alt={crop.name}
                                                                style={{
                                                                    width: '32px',
                                                                    height: '32px',
                                                                    objectFit: 'contain'
                                                                }}
                                                            />
                                                        )}
                                                        <span className="crop-name">{crop.name}</span>
                                                    </div>
                                                ))
                                            ) : (
                                                <div className="no-data">
                                                    ÂΩìÂâçÂ≠£ËäÇÊàñÊ®°ÁªÑ‰∏ãÊ≤°ÊúâÂèØÁî®‰ΩúÁâ©ÔºåËØ∑Â∞ùËØïÈÄâÊã©ÂÖ∂‰ªñÂ≠£ËäÇÊàñÂêØÁî®Êõ¥Â§öÊ®°ÁªÑ
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    <button
                                        className="btn btn-primary btn-block"
                                        onClick={calculateRatios}
                                        disabled={filteredCrops.length === 0}
                                        style={filteredCrops.length === 0 ? { opacity: 0.5, cursor: 'not-allowed' } : {}}
                                    >
                                        ËÆ°ÁÆóÁßçÊ§çÊØî‰æã
                                    </button>
                                </div>

                                {/* ÁªìÊûúÂ±ïÁ§∫ */}
                                {Object.keys(results).length > 0 ? (
                                    <div className="results-container">
                                        <h3>ËÆ°ÁÆóÁªìÊûúÔºö</h3>
                                        {Object.entries(results).map(([name, ratios], index) => {
                                            // Ëß£Êûê‰ΩúÁâ©ÂêçÁß∞ÔºåÊü•ÊâæÂØπÂ∫îÁöÑÂõæÁâá
                                            const cropNames = name.split(':');
                                            const cropItems = cropNames.map(cropName => {
                                                const crop = data.find(c => c.name === cropName.trim());
                                                return crop || { name: cropName.trim(), image: null };
                                            });

                                            return (
                                                <div key={index} className="result-item">
                                                    <div className="result-title">
                                                        <div style={{ display: 'flex', alignItems: 'center', gap: '6px', flexWrap: 'wrap' }}>
                                                            {cropItems.map((crop, idx) => (
                                                                <React.Fragment key={idx}>
                                                                    {idx > 0 && <span style={{ margin: '0 4px' }}>:</span>}
                                                                    <div style={{ display: 'flex', alignItems: 'center', gap: '3px' }}>
                                                                        {crop.image && (
                                                                            <img
                                                                                src={crop.image}
                                                                                alt={crop.name}
                                                                                style={{
                                                                                    width: '24px',
                                                                                    height: '24px',
                                                                                    objectFit: 'contain'
                                                                                }}
                                                                            />
                                                                        )}
                                                                        <span>{crop.name}</span>
                                                                    </div>
                                                                </React.Fragment>
                                                            ))}
                                                        </div>
                                                        <span>ÂÖ±{ratios.length}ÁßçÊØî‰æã</span>
                                                    </div>
                                                    <div className="result-ratios">
                                                        {ratios.map((ratio, idx) => (
                                                            <span key={idx} className="ratio-badge">{ratio}</span>
                                                        ))}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                ) : (
                                    <div className="no-results">
                                        <div className="no-results-icon">üîç</div>
                                        <p>Êú™ÊâæÂà∞Á¨¶ÂêàÊù°‰ª∂ÁöÑÁßçÊ§çÊØî‰æã</p>
                                        <p style={{ fontSize: '0.9rem', marginTop: '10px' }}>
                                            ËØ∑Â∞ùËØïÔºö
                                            <ul style={{ textAlign: 'left', marginTop: '5px', paddingLeft: '20px' }}>
                                                <li>ÈÄâÊã©‰∏çÂêåÁöÑ‰ΩúÁâ©ÁªÑÂêà</li>
                                                <li>ÂáèÂ∞ëÈÄâÊã©ÁöÑ‰ΩúÁâ©Êï∞Èáè</li>
                                                <li>Â∞ùËØïÂÖ∂‰ªñÂ≠£ËäÇ</li>
                                                <li>ÂêØÁî®Êõ¥Â§öÊ®°ÁªÑÊâ©Â±ï‰ΩúÁâ©ÁßçÁ±ª</li>
                                            </ul>
                                        </p>
                                    </div>
                                )}
                            </div>

                            {/* Âø´ÈÄüÊèêÁ§∫ */}
                            <div className="card">
                                <h3>üí° ‰ΩøÁî®ÊèêÁ§∫</h3>
                                <ul style={{ paddingLeft: '20px', color: 'var(--text-secondary)' }}>
                                    <li>ÈÄâÊã©Â≠£ËäÇÂèØ‰ª•Á≠õÈÄâÂΩìÂâçÂ≠£ËäÇÂèØÁßçÊ§çÁöÑ‰ΩúÁâ©</li>
                                    <li>ÈÄâÊã©ÁâπÂÆö‰ΩúÁâ©ÂèØ‰ª•Á≠õÈÄâÂåÖÂê´Ëøô‰∫õ‰ΩúÁâ©ÁöÑÁßçÊ§çÊØî‰æã</li>
                                    <li>ÂéüÁâàÂèØ‰ª•ÂèñÊ∂àÂãæÈÄâÔºåÂè™‰ΩøÁî®Ê®°ÁªÑ‰ΩúÁâ©</li>
                                    <li>ËÆ°ÁÆóÂá∫ÁöÑÊØî‰æãË°®Á§∫ÂêÑÁßç‰ΩúÁâ©‰πãÈó¥ÁöÑÁßçÊ§çÊï∞ÈáèÊØî</li>
                                    <li>Á°Æ‰øùËÇ•ÊñôÊÄªÈáèÂπ≥Ë°°Ôºå‰ΩúÁâ©ÊâçËÉΩÈïøÊàêÂ∑®Â§ß‰ΩúÁâ©</li>
                                    <li>Â∏∏ËßÅÊØî‰æãÂ±ïÁ§∫‰∫ÜÊ†áÂáÜÁöÑÁßçÊ§çÂ∏ÉÂ±ÄÊ®°Âºè</li>
                                    <li>ÈÄâÊã©ÊâÄÊúâÂ≠£ËäÇÊó∂ÔºåÂè™ËÆ°ÁÆóËÉΩÂú®Âêå‰∏ÄÂ≠£ËäÇÁßçÊ§çÁöÑ‰ΩúÁâ©ÁªÑÂêà</li>
                                </ul>
                            </div>
                        </div>

                        {/* Âè≥‰æßËÆ°ÁÆóÂô® */}
                        <div className="right-column">
                            {/* ‰ΩúÁâ©‰ø°ÊÅØÂå∫Âüü */}
                            <Accordion title="üìä ‰ΩúÁâ©ËØ¶ÁªÜÊï∞ÊçÆ" defaultOpen={true}>
                                <div className="info-text">
                                    <p><strong>‰ΩúÁâ©Ê∞¥ÈáèÔºö</strong>3‰∏™Ê∞¥Êª¥‰∏∫1ÁªÑÔºå1ÁªÑÊ∞¥Ê∂àËÄóÔºö0.0075/ÁßíÔºå2ÁªÑÊ∞¥Ê∂àËÄóÔºö0.02/ÁßíÔºå3ÁªÑÊ∞¥Ê∂àËÄóÔºö0.035/Áßí</p>
                                    <p><strong>‰ΩúÁâ©ËÇ•ÊñôÔºö</strong>Âêë‰∏äÁÆ≠Â§¥‰∏∫Ê∂àËÄóÔºåÂêë‰∏ãÁÆ≠Â§¥‰∏∫ÊÅ¢Â§çÔºå‰∏Ä‰∏™ÁÆ≠Â§¥Êï∞ÊçÆ‰∏∫8</p>
                                    <p><strong>ËÇ•ÊñôÔºö</strong>‰∏Ä‰∏™ÁÆ≠Â§¥Êï∞ÊçÆ‰∏∫8ÔºåÂ¶ÇÂ†ÜËÇ•ÂèØÊÅ¢Â§çÂúüÂú∞3ÁÆ≠Â§¥ÁöÑÂ†ÜËÇ•Âç≥24Â†ÜËÇ•Èáè</p>
                                    <p><strong>Ê∂àËÄóÊó∂Êú∫Ôºö</strong>Ê∞¥ÂàÜÊòØÊåÅÁª≠Ê∂àËÄóÁöÑÔºåËÇ•ÊñôÊòØÂú®ÁîüÈïøÂà∞‰∏ã‰∏ÄÈò∂ÊÆµÊó∂Ê∂àËÄó</p>
                                </div>
                            </Accordion>

                            <Accordion title="üå± ÁßçÂ≠êÁúüÂêçÂØπÁÖß">
                                <div className="table-container">
                                    <table className="data-table">
                                        <thead>
                                            <tr>
                                                <th>ÂéüÂêç</th>
                                                <th>ÁúüÂêç</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {seedNames.map((seed, index) => (
                                                <tr key={index}>
                                                    <td>{seed.original}</td>
                                                    <td>{seed.real}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </Accordion>

                            <Accordion title="üìê Â∏∏ËßÅÁßçÊ§çÊØî‰æã">
                                <div className="ratio-grid-container">
                                    {commonRatios.map((ratio, index) => (
                                        <Accordion key={index} title={`${ratio.name}`} defaultOpen={index < 3}>
                                            <RatioCanvas ratioName={ratio.name} theme={theme} />
                                        </Accordion>
                                    ))}
                                </div>
                            </Accordion>

                        </div>
                    </main>

                    <footer style={{
                        textAlign: 'center',
                        marginTop: '40px',
                        padding: '20px',
                        color: 'var(--text-secondary)',
                        borderTop: '1px solid var(--border-color)'
                    }}>
                        <p>È••Ëçí‰ΩúÁâ©ÁßçÊ§çÂä©Êâã - Êï∞ÊçÆÂü∫‰∫éÈ••ËçíËÅîÊú∫Áâà Farming Simulator</p>
                        <p>Ê≥®ÊÑèÔºöËÆ°ÁÆóÁªìÊûú‰ªÖ‰æõÂèÇËÄÉÔºåÂÆûÈôÖÊ∏∏Êàè‰∏≠ËØ∑Ê†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµË∞ÉÊï¥</p>
                    </footer>
                </div>
            );
        };

        // Ê∏≤ÊüìÂ∫îÁî®
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>